#ChattingService

##요구사항과 초기설정

- 정적 파일 서비스(HTML,CSS와 클라이언트 측 자바스크립트 등..)
- 서버에서 채팅과 관련된 메시지 처리
- 사용자 브라우저에서 채팅과 관련된 메시지 처리


 정적 파일을 서비스 하려면 노드에 포함된 HTTP모듈을 사용해야 한다. 또한, HTTP를 이용해 파일을 서비스한다면 파일 내용뿐만 아니라 전송되는 파일의
 종류도 포함하여 전송해야 한다. 이 정보는 HTTP 헤더의 Content-Type에 설정할 수 있으며 파일의 적절한 마임 형식을 헤더에 추가해 준다.

 채팅과 관련된 메시지를 처리하기 위해 Ajax를 이용해 서버로부터 데이터를 가져올 수 있다. 하지만 에플리케이션이 가능한 한 빨리 반응하게 하려면 기존의
 Ajax방식을 사용해 메시지를 전송하는 방법을 피해야 한다. Ajax가 전송 체계로 사용하는 HTTP는 실시간 통신을 위해 설계된 것이 아니다.
 HTTP를 이용해 메시지를 전송하면 매번 새로운 TCP/IP 연결을 사용해야 한다. 연결을 시작하고 종료하는데 시간이 소요되며 모든 요청마다 HTTP헤더 정보를
 보내야하므로 전송해야 할 데이터양도 더 많아지게 된다. 그러므로 HTTP보다는 실시간 통신을 지원하기 위해 설계된 양방향 경량 통신 프로토콜인 웹소켓을 이용하는 편이 낫다.

 하지만 HTML5를 잘 지원하는 브라우저에서만 웹 소켓을 지원하는 관계로 애플리케이션에서는 플래시를 비롯해 웹소켓을 사용할 수 없을 때 다양한 대체 기능을
 제공하는 인기 라이브러리인 Socket.IO를 활용한다. 

 ##HTTP와 웹소켓 서비스

 애플리케이션에서 채팅 메시지를 주고받을 때 Ajax를 사용하지 않기로 했다. 하지만 사용자의 브라우저에 그릴 화면을 보여줄 때 필요한 HTML, CSS, 클라이언트 측의 자바스크립트를
 전송하려면 여전히 HTTP를 사용해야 한다. 노드는 하나의 TCP/IP 포트를 이용해 HTTP와 웹소켓을 동시에 쉽게 서비스 한다.

##Socket.IO를 이용한 채팅 관련 메시지 처리

- Socket.IO가 제공하는 가상 채널을 이용하면 접속한 모든 사용자에게 메시지를 뿌리지 않고 특정 채널을 구독하는 사용자에게만 메시지를 전송할 수 있다. 

1. Socekt.IO 서버는 server.js에서 호출하며, 피기백 방식으로 서버를 시작한다. 각연결을 어떻게 처리할지 정의하며 접속시 닉네임 부여, 사용자의 메시지 닉네임 변경, 채팅방생성등
다양한 것들을 처리한다.

2. 애플리케이션 시나리오와 이벤트 처리는, 손님 닉네임부여, 님네임 부여, 채팅 메시지 전송, 채팅방 생성, 사용자 접속해제 등이 있다.