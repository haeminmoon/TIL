#I/O MultiFlexing

##멀티프로세스 서버

멀티프로세스 서버는 클라이언트 연결요청이 있을 때마다, 새로운 프로세스를 생성하는 기법으로, 상당히 많은 양의 연산이 요구되고, 필요한 메모리 공간도 비교적 큰 편이다.

![멀티 프로세스 서버](http://cfile5.uf.tistory.com/image/113C2D4D4FB206DC121A2D)

##멀티플렉싱 서버

프로세스의 생성을 동반하지 않고, 다수의 클라이언트들에게 서비스를 제공할 수 있는 방법으로 나온 것이 멀티 플렉싱기법이다.
 
멀티플렉싱은 물리적 장치의 효율성을 높이기 위해 최소한의 물리적인 요소만 사용해서 최대한의 데이터를 전달하기 위해 사용하는 기술이다.

![멀티 플렉싱 서버](http://cfile8.uf.tistory.com/image/1272B7504FB209530E53F5)

자식프로세스가 각각의 소켓을 처리하는게 아니고, 서버하나가 각각의 소켓에 대한 서비스를 제공하는게 멀티플렉싱의 개념이다.


	IO Multiplexing의 두 가지 기법

	select를 이용한 기법의 장점 : 이식성이 좋다. (여러 운영체제에서 호환이 용이)
	select를 이용한 기법의 단점 : 비교적 성능이 떨어지기 때문에, 아주 많은 클라이언트들을 관리하기에는 적합하지 않다.

	epoll을 이용한 기법의 장점 : 성능이 뛰어나서 많은 클라이언트를 관리하기에 좋다. 구현도 편리하다.
	epoll을 이용한 기법의 단점 : Linux에서만 사용하는 기법이기 때문에 이식성이 좋지 않다.

	select 함수의 경우, 매번 클라이언트들의 변화를 감지하기 위해 함수가 호출될 때 마다 파일 디스크립터 배열 전체를 전달받아야 하기 때문에 클라이언트가 많아질수록 성능이 급격히 떨어진다.

	epoll을 이용한 기법에서는 관찰해야 할 파일 디스크립터와, 그 디스크립터로부터 관찰해야 할 event의 종류를 'epoll 인스턴스'에 저장할 수 있다. 
	이 'epoll 인스턴스'에 등록된 파일 디스크립터들은 운영체제에 넘겨져 저장되며, 이후에 프로그램이 epoll_wait함수를 호출해 대기하고 있으면
	등록된 event가 발생할 때 운영체제가 해당 파일 디스크립터를 프로세스로 넘겨준다. Select 기법에서 직접 파일 디스크립터 배열을 검사하며 event를 찾아내야 했던 것과는 다르게, 
	epoll 기법에서는 모든 계획을 운영체제에 미리 전달한 뒤 epoll_wait 함수를 통해 기다리기만 하면 되는 것이다.


##멀티프로세스와 멀티플렉싱 비교

멀티플렉싱과 멀티프로세스의 차이는 서비스를 제공하는 프로세스 갯수의 차이가 각각 한개와, 클라이언트수만큼이라는 것이다.

**멀티플렉싱 서버를 사용하기 적합한 경우.**

1. 클라이언트와 서버간의 송수신 데이터 용량이 작은 경우 적합 
2. 송수신이 연속적이지 않은 경우에 적합 
3. 멀티 프로세스 기반에 비해 많은 수의 클라이언트 처리에 적합